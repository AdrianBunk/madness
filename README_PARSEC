Some info about parsec compilation: 

Let's start with the beginning:
0. Define a placeholder for the entire project, and define an environment variable to point to it. Also, we will create an installation directory for all the software inside and we will configure them accordingly. We will also add the binary part of the installation directory to our PATH.
  export TESSE_DIR=*my development directory*
  export PATH=${PATH}:${TESSE_DIR}/install/bin

1. First we need a working version of PaRSEC. 

1.a. You can grab the latest and greatest from the main bitbucket repo
git clone git@bitbucket.org:icldistcomp/parsec.git

1.b. Let’s use a VPATH compilation to keep the sources clean.
  cd parsec
  mkdir build
  cd build

1.c. Configure PaRSEC with the right options. This requires to have -fPIC in the CFLAGS, install the development headers, and then finally set the PKG_CONFIG_PATH to the right location. If you want a debug build add “-DCMAKE_BUILD_TYPE=Debug“ before the “../“.

cmake -G 'Unix Makefiles' -DBUILD_SHARED_LIBS=ON —DDAGUE_WITH_DEVEL_HEADERS=ON DHWLOC_DIR=/Users/bosilca/opt -DDAGUE_DIST_WITH_MPI=OFF -DDAGUE_GPU_WITH_CUDA=OFF -DCMAKE_INSTALL_PREFIX:PATH=${TESSE_DIR}/install -DBUILD_DPLASMA=OFF ../

PaRSEC will complain about missing BLAS libraries, but for the purpose of TESSE we don’t need them. Take a careful look at the output, to make sure HWLOC has been correctly found.

make install
export PKG_CONFIG_PATH=${PKG_CONFIG_PATH}:${TESSE_DIR}/install/lib/pkgconfig

2. Setting up MADNESS.

2.a Clone the TESSE repo, and switch to the correct branch

git clone -b madness_over_parsec git@github.com:TESSEorg/madness.git
cd madness

2.b 
sh ./autogen.sh
./configure --disable-optimization --enable-debugging --without-tbb  —with-parsec=${TESSE_DIR}
make


=== Old version ===

In order for the compilation to work, the following modifications must
be done when compiling parsec (at ccmake . step):
1- Add -fPIC to CFLAGS (EV: this did not work for me, setting BUILD_SHARED_LIBS cmake var to ON  did)
2- Set DAGUE_WITH_DEVEL_HEADERS ON
3- Set DAGUE_DIST_WITH_MPI OFF (with openMPI)
4- You have to run make install after make
5- Set PKG_CONFIG_PATH to where parsec.pc is (PARSEC_INSTALL_DIR/lib/pkgconfig)

The cmake command for madness is (from a build directory):
cmake -Wno-dev -D
CMAKE_TOOLCHAIN_FILE=PATH_to_MADNESS/cmake/toolchains/dancer_gcc.cmake
-D ENABLE_TBB=OFF -D ENABLE_MPI=OFF PATH_to_MADNESS

dancer_gcc.cmake is the configure file for a linux based machine
(update the paths and the CC and CXX compilers if needed, plus update the parsec directory).

Some info about the repo: 
It's a fork of madness. I created a branch (madness_over_parsec) of
the fork to safely push changes and leave master unchanged for updates
with the remote madness repository.

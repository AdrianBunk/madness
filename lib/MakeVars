# Emacs should use -*- Makefile -*- mode.

MAKEVARS_FOUND=yes

host = i686-pc-linux-gnu
host_cpu = i686
host_vendor = pc
host_os = linux-gnu

target = i686-pc-linux-gnu
target_cpu = i686
target_vendor = pc
target_os = linux-gnu

MADNESS_VERSION = 1.0.0-alpha
MADNESS_SO_VERSION = 1:0:0
BUILDID = alpha

# The template repository
TMPLREPO = 

# "yes", if the contents of TMPLREPO should be put into libraries
TMPLINLIB = no

# "yes", if libraries should be prelinked to force templates to
# be instantiated
TMPLINST = no

# The object code suffix
OBJSUF = o

# The library suffix
LIBSUF = a

ENABLESHARED = no

ifeq ($(ENABLESHARED),yes)
  LIBTOOL= $(SHELL) $(TOPDIR)/libtool
  LTLINK = $(LIBTOOL) --mode=link
  ifneq ($(BUILDID),)
    LTLINKLIBOPTS = -rpath $(libdir) -release $(BUILDID) -version-info $(MADNESS_SO_VERSION)
  else
    LTLINKLIBOPTS = -rpath $(libdir) -version-info $(MADNESS_SO_VERSION)
  endif
  LTLINKBINOPTS =
  LTCOMP = $(LIBTOOL) --mode=compile
  LTINST = $(LIBTOOL) --mode=install
  
else
  LIBTOOL= 
  LTLINK = 
  LTLINKLIBOPTS = 
  LTLINKBINOPTS = 
  LTCOMP = 
  LTINST = 
endif

# The suffix generated by the -M compiler option
CXXDEPENDSUF = none
CXXDEPENDFLAGS = -M

CXX = mpicxx
CXXDEPEND = mpicxx

AR = ar
ARFLAGS = r

LD = $(CXX)
LDFLAGS = 

INSTALL = /usr/bin/install -c
INSTALLDIROPT = -d -m 0755
INSTALLLIBOPT = -m 0644
INSTALLBINOPT = -m 0755
INSTALLSCRIPTOPT = -m 0755

prefix=/usr/local/madness
exec_prefix=${prefix}
bindir=${exec_prefix}/bin
libdir=${exec_prefix}/lib
includedir=${prefix}/include
datadir=${prefix}/share

RANLIB = ranlib
PERL = perl
COMPRESS = gzip
UNCOMPRESS = gzip -d
LN_S = ln -s
LISTLIBS= $(PERL) $(SRCTOPDIR)/bin/listlibs.pl -DLIBSUF=$(LIBSUF)
F77_SYMBOL = symbol_
MKF77SYM= $(PERL) $(SRCTOPDIR)/bin/mkf77sym.pl

# first check for generated include files in the machine dependent directories
# and then for include files in the src directory
INCLUDE = -I$(TOPDIR)/include -I$(TOPDIR)/src/lib -I$(SRCTOPDIR)/include -I$(SRCTOPDIR)/src/lib \
	  
DEFINES = -DHAVE_CONFIG_H  -D_ISOC99_SOURCE=1 -DRESTRICT=restrict

CPPFLAGS = $(DEFINES) $(INCLUDE)

CXXFLAGS = -Wall -ggdb -march=pentium4 -mtune=pentium4 -msse2 -mfpmath=sse -O3 -funroll-loops -ffast-math -fomit-frame-pointer 
HIGHOPT_CXXFLAGS = $(CXXFLAGS)
NOALIAS_CXXFLAGS = $(NOALIAS_CFLAGS)

HAVE_MPI = yes
HAVE_PTHREADS = yes

BLAS = -lblas
LAPACK =  -llapack
SYSLIBS = $(LAPACK) $(BLAS) -lg2c

DOXYGEN = doxygen
PDFLATEX = /usr/bin/pdflatex

